/* 
 * Système de Titres Unifiés BANDEV - Refonte selon nouvelles spécifications
 * Fond global #5D726F avec couleurs harmonisées et lisibilité optimale
 */

@layer components {
  /* Design Tokens harmonisés pour titres selon spécifications */
  :root {
    /* Police système moderne unifiée */
    --heading-family:
      'Inter', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    --heading-weight-reg: 700;
    --heading-weight-bold: 800;
    --heading-weight-black: 900;

    /* Espacements optimisés */
    --ls-tight: var(--tracking-tight);
    --ls-normal: var(--tracking-normal);
    --lh-hero: var(--leading-tight);
    --lh-sec: var(--leading-normal);

    /* Échelles responsives harmonisées avec tokens */
    --h1-hero: var(--text-hero);      /* clamp(2.5rem, 5vw, 4rem) */
    --h2-sec: var(--text-h2);         /* clamp(1.75rem, 3.5vw, 2.25rem) */
    --h3-sec: var(--text-h3);         /* clamp(1.5rem, 3vw, 1.875rem) */
    --h-sub: var(--text-h4);          /* clamp(1.25rem, 2.5vw, 1.5rem) */

    /* COULEURS selon spécifications - fond #5D726F */
    --heading-primary: var(--text-primary);      /* Texte principal optimal sur fond foncé */
    --heading-secondary: var(--text-secondary);  /* Texte secondaire lisible */
    --heading-brand: var(--brand-emerald);       /* Couleur exacte logo BANDEV pour titres de section */
    --heading-contrast: var(--anthracite-50);    /* Contraste maximum */

    /* Dégradé harmonisé avec marque BANDEV */
    --g-start: var(--brand-emerald);             /* Couleur exacte logo BANDEV */
    --g-mid: var(--color-secondary-500);         /* Turquoise complémentaire */
    --g-end: var(--color-accent-500);            /* Bleu accent */

    /* Effets adaptés au fond #5D726F */
    --stroke-glass: rgba(255, 255, 255, 0.18);   /* Stroke glassmorphique */
    --shadow-heading: 0 2px 8px rgba(0, 0, 0, 0.15); /* Ombre subtile pour lisibilité */
  }

  /* Base pour tous les titres - LISIBILITÉ GARANTIE */
  .heading,
  .hero-title,
  .section-title,
  .card-title,
  h1, h2, h3, h4, h5, h6 {
    font-family: var(--heading-family);
    letter-spacing: var(--ls-tight);
    margin: 0;
    font-weight: var(--heading-weight-bold);
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    /* CORRECTION PRIORITAIRE : lisibilité sur fond #5D726F */
    color: var(--heading-primary) !important;
  }

  /* Titre héros (H1) - Contraste optimal sur fond #5D726F */
  .hero-title,
  h1 {
    font-size: var(--h1-hero);
    line-height: var(--lh-hero);
    color: var(--heading-contrast) !important; /* Contraste maximum */
    text-shadow: var(--shadow-heading); /* Ombre pour lisibilité */
    font-weight: var(--heading-weight-black);
  }

  /* Titres de section (H2) - COULEUR EXACTE DU LOGO BANDEV */
  .section-title,
  h2 {
    font-size: var(--h2-sec);
    line-height: var(--lh-sec);
    color: var(--heading-brand) !important; /* Couleur exacte du logo BANDEV */
    font-weight: var(--heading-weight-bold);
    letter-spacing: var(--ls-normal);
  }

  /* Titres principaux de cards (H3) - COULEUR EXACTE DU LOGO BANDEV */
  .card-title,
  h3 {
    font-size: var(--h3-sec);
    line-height: 1.2;
    color: var(--heading-brand) !important; /* Couleur exacte du logo BANDEV */
    font-weight: var(--heading-weight-reg);
  }

  /* Sous-titres (H4, H5, H6) - Hiérarchie anthracite */
  h4 {
    font-size: var(--h-sub);
    line-height: 1.3;
    color: var(--anthracite-200) !important; /* Lisible sur fond foncé */
    font-weight: var(--heading-weight-reg);
  }

  h5 {
    font-size: var(--text-body);
    line-height: 1.4;
    color: var(--anthracite-300) !important; /* Hiérarchie visuelle */
    font-weight: 600;
  }

  h6 {
    font-size: var(--text-small);
    line-height: 1.4;
    color: var(--anthracite-400) !important; /* Jamais en dessous de 4.5:1 */
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: var(--tracking-wide);
  }

  /* Sous-titre héros - Lisibilité optimale */
  .hero-subtitle {
    font-size: var(--h-sub);
    line-height: 1.4;
    color: var(--heading-secondary) !important;
    font-weight: 400;
    text-shadow: var(--shadow-heading);
  }

  /* Classe pour les mots-clés avec dégradé harmonisé */
  .k {
    background-image: linear-gradient(
      90deg,
      var(--g-start) 0%,
      var(--g-mid) 55%,
      var(--g-end) 100%
    );
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    background-size: 100% 100%;
  }

  /* Dégradé pour mots-clés dans les titres héros */
  .hero-title .k {
    text-shadow: var(--shadow-heading);
  }

  /* Dégradé pour mots-clés dans les titres de section */
  .section-title .k {
    /* Garde seulement le dégradé pour lisibilité */
  }

  /* Mots-clés dans les cards - dégradé propre */
  .card-title .k {
    /* Garde seulement le dégradé propre */
  }

  /* CORRECTIONS SPÉCIFIQUES pour lisibilité */
  
  /* Overlays sombres réduites pour titres lisibles */
  .overlay-dark {
    background: rgba(0, 0, 0, 0.3) !important; /* Réduit pour lisibilité */
  }
  
  .overlay-dark h1,
  .overlay-dark h2,
  .overlay-dark h3,
  .overlay-dark .hero-title,
  .overlay-dark .section-title,
  .overlay-dark .card-title {
    color: var(--anthracite-50) !important;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.6);
  }

  /* Titres sur containers glassmorphiques */
  .glass-card h1,
  .glass-card h2,
  .glass-card h3,
  .glass-card .card-title {
    color: var(--heading-primary) !important;
  }

  /* Accessibilité - Réduction des effets si préféré */
  @media (prefers-reduced-motion: reduce) {
    .hero-title,
    .section-title,
    .card-title {
      text-shadow: none;
    }
  }

  /* Responsive - Ajustements pour mobile */
  @media (max-width: 640px) {
    .hero-title,
    h1 {
      font-size: clamp(2rem, 8vw, 3rem);
    }
    
    .section-title,
    h2 {
      font-size: clamp(1.5rem, 6vw, 2rem);
    }
    
    .card-title,
    h3 {
      font-size: clamp(1.25rem, 5vw, 1.75rem);
    }
    
    /* Espacement mobile optimisé */
    .hero-title,
    .section-title,
    .card-title {
      margin-bottom: 1rem;
    }
  }

  /* Contraste élevé pour accessibilité */
  @media (prefers-contrast: high) {
    .hero-title,
    .section-title,
    .card-title,
    h1, h2, h3, h4, h5, h6 {
      color: var(--anthracite-50) !important;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
    }
  }

  /* Print styles - Lisibilité sur papier */
  @media print {
    .hero-title,
    .section-title,
    .card-title,
    h1, h2, h3, h4, h5, h6 {
      color: #000000 !important;
      text-shadow: none;
    }
    
    .k {
      background-image: none;
      -webkit-text-fill-color: initial;
      color: #000000;
    }
  }
}